% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/DEMO_design.R
\name{DEMO_design}
\alias{DEMO_design}
\title{A Demonstration of a Multi-Stage Dose-Finding Design}
\usage{
DEMO_design(
  doses = c(0.05, 0.1, 0.2, 0.45, 0.65, 0.85),
  Y_B_sim = c(2, 2.01, 2.08, 2.76, 3.75, 4.73),
  sigma2_B_sim = 1,
  Y_T_sim = c(0.01, 0.02, 0.03, 0.06, 0.13, 0.26),
  Y_R_sim = c(0.04, 0.05, 0.08, 0.2, 0.35, 0.47),
  delta1_sim = 3,
  delta2_sim = -2,
  delta3_sim = -0.01,
  lambdaT_sim = c(0.8, 0.6, 0.6, 0.25, 0.2, 0.1),
  shape_sim = 1.5,
  censored_time = 24,
  RMST_followup = 12,
  cohort_stage1 = 10,
  cohortsize_stage1 = 3,
  cohort_stage2 = 3,
  cohortsize_stage2 = 3,
  M = 24,
  target_toxicity = 0.3,
  min_acceptable_ORR = 0.2,
  min_acceptable_PFS = 3,
  c_B = 0.3,
  c_T = 0.6,
  c_R = 0.8,
  c_S = 0.9,
  L1 = 3,
  L2 = 4,
  kappa = 0.3,
  seed = 1
)
}
\arguments{
\item{doses}{A numeric vector of candidate dose levels. \strong{Default:} \code{c(0.05, 0.10, 0.20, 0.45, 0.65, 0.85)}}

\item{Y_B_sim}{A numeric vector of true mean biomarker responses at each dose. \strong{Default:} \code{c(2.00, 2.01, 2.08, 2.76, 3.75, 4.73)}}

\item{sigma2_B_sim}{A numeric scalar for the true variance of the biomarker. \strong{Default:} \code{1}}

\item{Y_T_sim}{A numeric vector of true short-term toxicity probabilities at each dose. \strong{Default:} \code{c(0.01, 0.02, 0.03, 0.06, 0.13, 0.26)}}

\item{Y_R_sim}{A numeric vector of true intermediate-term response (ORR) probabilities at each dose. \strong{Default:} \code{c(0.04, 0.05, 0.08, 0.20, 0.35, 0.47)}}

\item{delta1_sim, delta2_sim, delta3_sim}{Numeric scalars for parameters in the hazard function for time-to-event modeling. \strong{Defaults:} \code{3} and \code{-2}, respectively.}

\item{lambdaT_sim}{A numeric vector of baseline hazard parameters at each dose for survival modeling. \strong{Default:} \code{c(0.4, 0.1, 0.1, 0.3, 0.3, 0.3)}}

\item{shape_sim}{A numeric scalar for the Weibull shape parameter. \strong{Default:} \code{1.5}}

\item{censored_time}{A numeric scalar specifying the censoring time (in months, for example). \strong{Default:} \code{24}}

\item{RMST_followup}{A numeric scalar specifying the area under the survival curve up to a specific time point. \strong{Default:} \code{12}}

\item{cohort_stage1, cohort_stage2}{Integers giving the number of cohorts in Stage 1 (BOIN) and Stage 2 (dose monitoring). \strong{Defaults:} \code{10} and \code{3}}

\item{cohortsize_stage1, cohortsize_stage2}{Integers for patients per cohort in Stage 1 and Stage 2. \strong{Defaults:} \code{3} and \code{3}}

\item{M}{An integer for maximum number of patients at each dose across the three-stage trial. \strong{Default:} \code{24}}

\item{target_toxicity}{A numeric scalar specifying the target toxicity rate. \strong{Default:} \code{0.30}}

\item{min_acceptable_ORR}{A numeric scalar specifying the minimum acceptable ORR (overall response). \strong{Default:} \code{0.20}}

\item{min_acceptable_PFS}{A numeric scalar for minimum acceptable restricted mean survival time (RMST). \strong{Default:} \code{3.0}}

\item{c_B, c_T, c_R, c_S}{Numeric cutoffs for early biomarker monitoring (\code{c_B}), toxicity (\code{c_T}), ORR (\code{c_R}), and survival (\code{c_S}). \strong{Defaults:} \code{0.30, 0.60, 0.80, 0.90}}

\item{L1, L2}{Integers controlling dose selection in Stage 2. \strong{Defaults:} \code{3} and \code{4}}

\item{kappa}{A numeric scalar for the \dQuote{efficacy plateau} threshold. \strong{Default:} \code{0.30}}

\item{seed}{An integer for the random seed. \strong{Default:} \code{1}}
}
\value{
A \code{list} with elements:
\describe{
\item{\code{trial}}{A data frame of patient-level outcomes (dose, biomarker, toxicity, survival, etc.).}
\item{\code{N1, N2, N3}}{Vectors tracking the number of patients enrolled at each dose in Stages 1, 2, and 3.}
\item{\code{OTD}}{The final selected Optimal Therapeutic Dose (or \code{0} if none is selected).}
}
}
\description{
\code{DEMO_design()} runs a hypothetical multi-stage Phase I/II trial design:
\enumerate{
\item Stage 1 uses a BOIN design for early dose exploration and toxicity control.
\item Stage 2 refines the set of \dQuote{admissible} doses based on observed toxicity,
biomarker data, and additional cohorts.
\item Stage 3 performs further expansions on the remaining doses, incorporating a
Weibull survival model, ultimately selecting an \dQuote{optimal} dose based
on efficacy and safety criteria.
}
}
\details{
This function simulates patient outcomes based on input dose-toxicity, dose-biomarker,
and dose-response relationships. It then performs three stages of data-driven decision-making:

\itemize{
\item \strong{Stage 1 (BOIN):} Identifies dose ranges unlikely to exceed the \code{target_toxicity} and
refines by biomarker cutoffs.
\item \strong{Stage 2:} Gathers more data on remaining \dQuote{admissible} doses, updating posterior
estimates of toxicity and efficacy, possibly further refining the set.
\item \strong{Stage 3:} Expands only those doses that remain acceptable, fits a Weibull survival model,
and ultimately selects an \emph{optimal therapeutic dose} (OTD) based on multiple endpoints.
}
}
\examples{
\dontrun{
  # Run with default parameters
  set.seed(123)
  result <- DEMO_design()

  # Check final optimal dose
  print(result$OTD)

  # Inspect overall trial data
  head(result$trial)
}

}
